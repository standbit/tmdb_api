# TMDB_API
Упражнение на чтение кода. Фильмы с TMDB.

## Как использовать код проекта?
### Первые шаги
1. Python3 должен быть установлен
2. Склонируйте репозиторий к себе на компьютер
3. Для страховки работайте в виртуальном окружении
4. Не устанавливайте зависимости из `requirements.txt`, где "заморожен" `requests`. В проекте используется стандартная библиотека `urlib.request`
5. Зарегиструйтесь на сайте [TMDB](https://www.themoviedb.org/)
6. Получите уникальный идентификатор для аутентификации на сайте TMBD - __API key__, ознакомьтесь с [документацией](https://developers.themoviedb.org/3/movies/get-movie-details)
7. Создайте файл `"MyFilmDB.json"` в директории проекта. Здесь будет храниться информация, полученная от API

### Предназначение файлов

#### hello_api_TMDB.py
Проверка API key. Запустите файл в консоли:
```python
python3 hello_api_TMDB.py
```
На приглашение ввести свой ключ, введите API key. Если все ок, то в консоли выведется бюджет фильма под номером `movie_number = <число>` из блока `if __name__ == '__main__'`. Если нет, то `Invalid api key`.

![image](https://user-images.githubusercontent.com/77130336/153907436-ff775bb8-4749-4013-ab83-04fa4ececd9a.png)

### tmdb_helpers.py
Функции из этого модуля работают в модулях `hello_api_TMDB.py` и `make_own_db.py`. 
Кратко, что они делают:
- в первой функции формируется адрес страницы запроса и его параметры (обязательный API key и опциональные), возвращается вызов второй функция с этими данными 
- во второй происходит выполнение запроса к API и получение декодированного ответа, производится десериализацию json объекта
- третья возвращает API key пользователя, в случае успешного запроса к API TMDB; поднимает исключение в случае HTTPError

### own_db_helpers.py
Единственная функция этого модуля `load_data(path)` производит десериализацию json-файла, в котором лежит "БД" с фильмами. В примере - это файл `"MyFilmDB.json"`. Функция используется в модулях `search_in_db.py` и `find_similar.py`.

### make_own_db.py
Мы подобрались к ключевому модулю. Здесь описана новая функция `load_films`, возвращающая список фильмов. Есть возможность указать, какой метод GET-запроса будет использован. В нашем случае - это __GET__ `/movie/{movie_id}`. В цикле по количеству фильмов, по-умолчанию - это 1000, собирается информация о фильмах с id от 1 до 1000. Также в консоли интерактивно отображается загрузка данных. 

В блоке `if __name__ == '__main__' указан файл './MyFilmDB.json', куда, сохраняется десериализованный json. Можно изменить количество фильмов, о которых нужна информация. В видео ниже будет показан процесс работы модуля с `films_amount = 50`
Запустите файл в консоли:
```python
python3 make_own_db.py
```
